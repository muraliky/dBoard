# QAF-specific: Generate Selenium Page Objects using GitHub Copilot

> This document instructs how to generate **QAF-style** Selenium Page Objects in **Java** using GitHub Copilot. It is intentionally strict about QAF conventions: repository-backed locators, QAFWebElement, correct QAF base classes, use of @FindBy(locator=...), and no hard-coded locators in code.

---

## Overview (short)

- Page classes must use QAF types (e.g. `com.qmetry.qaf.automation.ui.webdriver.QAFWebElement`) and `@FindBy(locator = "repo.key")` to reference locators defined in the QAF object repository (`*.properties` or `*.yml`).
- Page classes should extend the QAF page base class used in your project (commonly `WebDriverBaseTestPage< WebDriverTestPage >` or `WebDriverTestPage`). Use whichever your project requires — update the prompt to include it.
- Avoid raw Selenium `By` locators or hard-coded locator strings inside the Java class. Keep locators in the repository.

---

## Where to put repository locators

QAF supports multiple repository layouts. Common patterns:

- `resources/pages/<page>.properties` (recommended per-page file)
- `resources/object-repository.properties` (single file)

Example: `resources/pages/login.properties`

```properties
login.username = id=user
login.password = id=pass
login.submit   = id=loginBtn
login.error    = id=errorMsg
```

Use `css=`, `xpath=`, `id=`, `name=` prefixes as required. Parameterized keys are supported:  
`product.item = xpath=//div[@data-id='${id}']`

---

## Copilot prompt templates (QAF-focused)

### Minimal (quick)

```java
// Copilot: generate a QAF Page Object in Java for the following HTML
// Page class name: LoginPage
// Locator prefix: login
// Base class: WebDriverBaseTestPage (or WebDriverTestPage)
// Output: Java class + suggested properties file entries

<!-- paste html below -->
```

### Detailed (recommended)

```java
/* Copilot: Generate a Java Page Object following QAF conventions.
   - Language: Java
   - QAF types: use QAFWebElement and @FindBy(locator = "<repo.key>")
   - Page class name: LoginPage
   - Locator repository prefix: login
   - Base class: WebDriverBaseTestPage<WebDriverTestPage>  
   - Responsibilities: enterUsername(String), enterPassword(String), clickLogin(), getErrorMessageText(), isLoaded(), waitForReady()
   - Also output suggested entries for resources/pages/login.properties (with keys prefixed by 'login.')
*/
```

**Prompting tips:**  
Include your package (e.g. `package com.mycompany.pages;`) and your preferred base class in the prompt. Ask Copilot to output both the Java class and the properties file in a single completion.

---

## QAF best practices & mandatory rules

1. **Locators in repository only** — no hard-coded locators anywhere in the class.
2. **Use QAF element types only** — `QAFWebElement`, not `WebElement`.
3. **Extend correct QAF base class** — match your framework setup.
4. **No Thread.sleep()** — rely on QAF wait utilities or QAFWebElement wait methods.
5. **Consistent keys** — prefix keys by page: `login.`, `product.`, `cart.`.
6. **Metadata required** — always use `@FindBy(locator="...")`.
7. **No By fields** — those violate QAF object repository convention.

---

## Example: QAF Page Object + properties (strict)

### File: `src/main/java/com/yourcompany/pages/LoginPage.java`

```java
package com.yourcompany.pages;

import com.qmetry.qaf.automation.ui.WebDriverBaseTestPage;
import com.qmetry.qaf.automation.ui.webdriver.QAFWebElement;
import com.qmetry.qaf.automation.ui.api.PageLocator;
import org.openqa.selenium.support.FindBy;

/**
 * QAF Page Object for the Login page.
 * Locators are stored in resources/pages/login.properties
 */
public class LoginPage extends WebDriverBaseTestPage<LoginPage> {

    @FindBy(locator = "login.username")
    private QAFWebElement username;

    @FindBy(locator = "login.password")
    private QAFWebElement password;

    @FindBy(locator = "login.submit")
    private QAFWebElement loginButton;

    @FindBy(locator = "login.error")
    private QAFWebElement errorMessage;

    @Override
    protected void openPage(PageLocator locator, Object... args) {
        getDriver().get("https://example.com/login");
    }

    private void waitForReady() {
        username.waitForVisible();
    }

    public LoginPage enterUsername(String user) {
        username.clear();
        username.sendKeys(user);
        return this;
    }

    public LoginPage enterPassword(String pass) {
        password.clear();
        password.sendKeys(pass);
        return this;
    }

    public void clickLogin() {
        loginButton.click();
    }

    public String getErrorMessageText() {
        if (errorMessage.isPresent() && errorMessage.isDisplayed()) {
            return errorMessage.getText();
        }
        return "";
    }

    public boolean isLoaded() {
        return username.isPresent() && username.isDisplayed();
    }
}
```

### File: `resources/pages/login.properties`

```properties
login.username = id=user
login.password = id=pass
login.submit   = id=loginBtn
login.error    = id=errorMsg
```

---

## Advanced patterns

### Parameterized locators

```properties
product.item = xpath=//div[@data-id='${id}']
```

Usage:

```java
QAFWebElement item = getDriver().findElement("product.item", id);
item.click();
```

---

## Copilot validation checklist (strict QAF)

- [ ] Extends correct QAF base class.
- [ ] Uses only `@FindBy(locator="repo.key")`.
- [ ] Repository keys exist in properties.
- [ ] Uses `QAFWebElement` instead of WebElement.
- [ ] No raw locators or `By` fields.
- [ ] No sleeps; proper QAF waits.
- [ ] Method names follow Java standards.

---

## Copy‑paste Copilot prompt

```java
/* Copilot: generate a QAF-compliant Java Page Object and properties file.
   - Package: com.yourcompany.pages
   - Page class: LoginPage
   - Base class: WebDriverBaseTestPage<LoginPage>
   - Locator prefix: login
   - Output: LoginPage.java + login.properties
   - Requirements: QAFWebElement, @FindBy(locator="repo.key"), no raw Selenium locators
*/
```

---

If you want, I can now generate **any specific QAF page object + properties file** from an HTML snippet you provide.
